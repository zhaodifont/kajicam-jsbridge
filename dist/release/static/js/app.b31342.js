webpackJsonp([1],{"2CaA":function(e,t){e.exports={assetsPublicPath:"./",assetsRoot:"../dist/release/",b612Scheme:"b612cn://",sitePrefix:"http://h5.kajicam.com/events/",uploadUrl:"https://b612-fs.snowcam.cn/v1/event/vision/xiaofu/upload-only",imgProcess:"https://b612-fs.snowcam.cn/v1/event/vision/xiaofu",imagePrefix:"https://b612kaji-org.oss-cn-beijing.aliyuncs.com/",filterId:"235",categoryId:"20005",stickerId:"301197"}},"2uFj":function(e,t,i){i("6rvf");var n=i("2CaA"),a=(i("TcyI"),null);a=n,e.exports=a},"6rvf":function(e,t){e.exports={assetsPublicPath:"./",assetsRoot:"../dist/beta/",b612Scheme:"b612cnb://",sitePrefix:"http://h5-beta.kajicam.com/events",uploadUrl:"http://qa-b612-fs.snowcam.cn/v1/event/vision/xiaofu/upload-only",imgProcess:"http://qa-b612-fs.snowcam.cn/v1/event/vision/xiaofu",imagePrefix:"https://qa-b612.snowcam.cn/owfs/",filterId:"235",categoryId:"20136",stickerId:"301197",activityName:"sept",downLink:"https://lnk0.com/easylink/EL50AJ9g"}},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),o=(i("9mmO"),i("1uLP"),i("52Wt"),i("TFWu"),i("MyjO"),i("qtRy"),i("THnP"),i("K0JP"),i("NfZy"),i("dTzs"),i("+vXH"),i("MsuQ"),i("dSUw"),i("ZDXm"),i("V/H1"),i("CVR+"),i("vmSu"),i("4ZU1"),i("yx1U"),i("SPtU"),i("A52B"),i("PuTd"),i("dm+7"),i("JG34"),i("Rw4K"),i("9mGU"),i("bUY0"),i("mTp7"),i("y9m4"),i("A0n/"),i("VTn2"),i("W/IU"),i("Y5ex"),i("WpPb"),i("+yjc"),i("gPva"),i("C+4B"),i("W4Z6"),i("tJwI"),i("eC2H"),i("n12u"),i("nRs1"),i("jrHM"),i("EuXz"),i("F3sI"),i("bqOW"),i("Racj"),i("tqSY"),i("CvWX"),i("Y1S0"),i("Gh7F"),i("pd+2"),i("MfeA"),i("VjuZ"),i("mJx5"),i("qwQ3"),i("beEN"),i("xMpm"),i("9vc3"),i("WpTh"),i("U6qc"),i("No4x"),i("WgSQ"),i("yuXV"),i("XtiL"),i("A1ng"),i("LG56"),i("Stuz"),i("aJ2J"),i("WiIn"),i("v2lb"),i("7Jvp"),i("lyhN"),i("kBOG"),i("xONB"),i("LlNE"),i("9xIj"),i("m6Yj"),i("wrs0"),i("Lqg1"),i("pWGb"),i("1ip3"),i("N4KQ"),i("Hl+4"),i("MjHD"),i("SRCy"),i("H0mh"),i("gbyG"),i("YVn/"),i("FKfb"),i("zmx7"),i("smQ+"),i("m8F4"),i("v8VU"),i("dich"),i("fx22"),i("SldL"),i("Zrlr")),s=i.n(o),r=i("wxAW"),l=i.n(r),c=function(){function e(){s()(this,e)}return l()(e,null,[{key:"isIos",value:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}},{key:"isAndroid",value:function(){return!!navigator.userAgent.match(/Android/i)}},{key:"isIosOrAndroid",value:function(){return e.isIos()||e.isAndroid()}},{key:"isIosLowerThan11",value:function(){var t=!1;e.isIos()&&(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]<=10);return t}},{key:"isIos8or9",value:function(){var e=navigator.userAgent;return e.indexOf("OS 8_")>=0||e.indexOf("OS 9_")>=-1}},{key:"appVersionLessThan",value:function(e){for(var t=e,i=window.kajiAppVersion,n=0;n<t.length;n++){var a=parseInt(i[n],10)||0,o=parseInt(t[n],10)||0;if(a<o)return!0;if(a>o)return!1}return!1}}]),e}(),u=i("Zx67"),d=i.n(u),h=i("zwoO"),v=i.n(h),g=i("Pf15"),m=i.n(g),f=i("yEsh"),p=i.n(f),k={bridgeNs1st:"B612",bridgeNs2nd:"Native",_initB612Context:function(){return window[this.bridgeNs1st]=window[this.bridgeNs1st]||{},window[this.bridgeNs1st][this.bridgeNs2nd]=window[this.bridgeNs1st][this.bridgeNs2nd]||{},window[this.bridgeNs1st][this.bridgeNs2nd]},getB612NativeContext:function(){var e=this._initB612Context();return e.namespace=this.bridgeNs1st+"."+this.bridgeNs2nd,e}},y=function(){function e(){return s()(this,e),null}return l()(e,[{key:"_initInstance",value:function(){this.className=this.constructor.name,this.fullName=k.getB612NativeContext().namespace+"."+this.className,this.callback={},this.callback.fullName=this.fullName+".callback",this._registerGlobal()}},{key:"_registerGlobal",value:function(){k.getB612NativeContext()[this.className]=k.getB612NativeContext()[this.className]||this}},{key:"_registerCallback",value:function(e,t,i){for(var n=arguments.length,a=Array(n>3?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];var s=this;return this.callback[e]=function(n){s._logResult(n,e);var o=i?i.from(n):n;t.apply(void 0,[o].concat(a))},this._makeNativeCallbackName(e)}},{key:"_makeNativeCallbackName",value:function(e){return this.callback.fullName+"."+e}},{key:"_logResult",value:function(e,t){var i=e;"string"==typeof e&&(i=e.substring(0,1e3)),console.log("[Native callback]["+t+"] : "+i)}},{key:"printThis",value:function(){console.log("--- print this below --- "),console.log(this),console.log("--- end of print this --- ")}}],[{key:"getInstance",value:function(){return null}}]),e}(),b=null,C=function(e){function t(){var e;s()(this,t);var i=v()(this,(t.__proto__||d()(t)).call(this));return b||(b=i,p()(t.prototype.__proto__||d()(t.prototype),"_initInstance",i).call(i,b)),e=b,v()(i,e)}return m()(t,e),l()(t,[{key:"appInfo",value:function(e){console.log("[NullBridge] appInfo")}},{key:"save",value:function(e,t){console.log("[NullBridge] save, param : "+e.toString())}},{key:"shareWithCallback",value:function(e,t,i){console.log("[NullBridge] shareWithCallback, param : "+e.toString())}},{key:"eventCamera",value:function(e,t){console.log("[NullBridge] eventCamera, param : "+e.toString())}},{key:"eventCameraWithLandmarks",value:function(e,t){console.log("[NullBridge] eventCamera, param : "+e.toString())}},{key:"getCameraImage",value:function(e){console.log("[NullBridge] getCameraImage")}},{key:"getCameraImageWithLandmarks",value:function(e){console.log("[NullBridge] getCameraImage")}},{key:"close",value:function(){console.log("[NullBridge] close")}},{key:"titleBarVisible",value:function(e){console.log("[NullBridge] titleBarVisible, param : "+e.toString())}},{key:"getUserSession",value:function(e){console.log("[NullBridge] getUserSession")}},{key:"loginWithSession",value:function(e){console.log("[NullBridge] loginWithSession")}},{key:"verifyPhoneWithSession",value:function(e){console.log("[NullBridge] verifyPhoneWithSession")}},{key:"selectVideoAndUpload",value:function(e,t){console.log("[NullBridge] selectVideoAndUpload, param : "+e.toString())}},{key:"takeVideoAndUpload",value:function(e){console.log("[NullBridge] selectVideoAndUpload")}}]),t}(y),I=function(){function e(t,i,n,a,o){s()(this,e),this.app=t,this.os=i,this.deviceModel=n,this.language=a,this.country=o}return l()(e,null,[{key:"from",value:function(t){var i=JSON.parse(t);return new e(i.app,i.os,i.deviceModel,i.language,i.country)}}]),e}(),_=function(){function e(t,i,n,a,o,r){s()(this,e),this.userId=t,this.name=i,this.userSeq=n,this.userM=a,this.email=o,this.success=r}return l()(e,null,[{key:"from",value:function(t){var i=JSON.parse(t);return new e(i.userId,i.name,i.userSeq,i.userM,i.email,i.success)}}]),e}(),S=function(){function e(t){s()(this,e),this.success=t}return l()(e,null,[{key:"from",value:function(t){return new e(JSON.parse(t).success)}}]),e}(),w=function(){function e(t,i){s()(this,e),this.base64Image=t,this.success=i}return l()(e,null,[{key:"from",value:function(t){return new e(t,!!t)}}]),e}(),N=function(){function e(t,i){s()(this,e),this.base64Image=t,this.success=i}return l()(e,null,[{key:"from",value:function(t){return t?new e(t.replace(/\n/gi,""),!0):new e(t,!1)}}]),e}(),A=function(){function e(t){var i=t.success,n=t.base64Image,o=t.url,r=t.landmarks;s()(this,e),this.success=i,this.base64Image=n,this.url=o,this.landmarks=a()(r)}return l()(e,null,[{key:"from",value:function(t){return new e(JSON.parse(t))}}]),e}(),W=function(){function e(t,i){s()(this,e),this.videoPath=t,this.success=i}return l()(e,null,[{key:"from",value:function(t){var i=JSON.parse(t);return new e(i.videoPath,i.success)}}]),e}(),P=null,V=window.B612KajiBridgeInterface,x=function(e){function t(){var e;s()(this,t);var i=v()(this,(t.__proto__||d()(t)).call(this));return P||(P=i,p()(t.prototype.__proto__||d()(t.prototype),"_initInstance",i).call(i,P)),e=P,v()(i,e)}return m()(t,e),l()(t,[{key:"appInfo",value:function(e){var t=this._registerCallback("appInfo",e,I);V.appInfo(t)}},{key:"save",value:function(e,t){var i=this._registerCallback("save",t,S);V.save(i,e.toString())}},{key:"shareWithCallback",value:function(e,t,i){var n=this._registerCallback("sharePoppedCallback",t,S),a=this._registerCallback("shareMediaClickedCallback",i,S);V.shareWithCallback(n,a,e.toString())}},{key:"eventCamera",value:function(e,t){c.isAndroid();var i=this._registerCallback("eventCamera",t,w,e.type,e.cameraPosition);V.eventCamera(i,e.toString(!0))}},{key:"eventCameraWithLandmarks",value:function(e,t){c.isAndroid(),c.appVersionLessThan([7,6,0])&&console.log("eventCameraWithLandmarks 7.6.0支持");var i=this._registerCallback("eventCameraWithLandmarks",t,A,e.type,e.cameraPosition);V.eventCameraWithLandmarks(i,e.toString(!0))}},{key:"getCameraImage",value:function(e){var t=this._registerCallback("getCameraImage",e,N);V.getCameraImage(t)}},{key:"getCameraImageWithLandmarks",value:function(e){var t=this._registerCallback("getCameraImageWithLandmarks",e,A);V.getCameraImageWithLandmarks(t)}},{key:"close",value:function(){c.appVersionLessThan([6,5,3])&&console.log("关闭当前h5所在的webview 6.5.3支持"),V.close()}},{key:"titleBarVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c.appVersionLessThan([7,10,1])&&console.log("隐藏title区域 7.10.1支持"),V.titleBarVisible(a()({isVisible:e}))}},{key:"getUserSession",value:function(e){var t=this._registerCallback("getUserSession",e,_);V.getUserSession(t)}},{key:"loginWithSession",value:function(e){var t=this._registerCallback("loginWithSession",e,_);V.loginWithSession(t)}},{key:"verifyPhoneWithSession",value:function(e){var t=this._registerCallback("verifyPhoneWithSession",e,_);V.verifyPhoneWithSession(t)}},{key:"selectVideoAndUpload",value:function(e,t){var i=this._registerCallback("selectVideoAndUpload",t,W);V.selectVideoAndUpload(i,e.toString(!0))}},{key:"takeVideoAndUpload",value:function(e,t){var i=this._registerCallback("takeVideoAndUpload",t,W);V.takeVideoAndUpload(i,e.toString(!0))}}]),t}(y),U=i("2uFj"),B=i.n(U),L=null,O=function(e){function t(){var e;s()(this,t);var i=v()(this,(t.__proto__||d()(t)).call(this));return L||(L=i,p()(t.prototype.__proto__||d()(t.prototype),"_initInstance",i).call(i,L)),e=L,v()(i,e)}return m()(t,e),l()(t,[{key:"appInfo",value:function(e){var t=this._registerCallback("appInfo",e,I);this._calliOSFunction("appInfo",null,t)}},{key:"save",value:function(e,t){var i=this._registerCallback("save",t,S);this._calliOSFunction("save",e,i)}},{key:"shareWithCallback",value:function(e,t,i){var n=this._registerCallback("sharePoppedCallback",t,S),a=this._registerCallback("shareMediaClickedCallback",i,S),o=JSON.parse(e.toString());o.clickShareButton=a,this._calliOSFunction("share",o,n)}},{key:"eventCamera",value:function(e,t){var i=this._registerCallback("eventCamera",t,A,e.type,e.cameraPosition);this._calliOSFunction("eventCamera",e,i)}},{key:"eventCameraWithLandmarks",value:function(e,t){c.appVersionLessThan([7,6,0])&&console.log("eventCameraWithLandmarks 7.6.0支持");var i=this._registerCallback("eventCameraWithLandmarks",t,A,e.type,e.cameraPosition);this._calliOSFunction("eventCameraWithLandmarks",e,i)}},{key:"getCameraImage",value:function(e){var t=this._registerCallback("getCameraImage",e,A);this._calliOSFunction("getCameraImage",null,t)}},{key:"getCameraImageWithLandmarks",value:function(e){var t=this._registerCallback("getCameraImageWithLandmarks",e,A);this._calliOSFunction("getCameraImageWithLandmarks",null,t)}},{key:"close",value:function(){c.appVersionLessThan([6,5,3])&&console.log("关闭当前h5所在的webview 6.5.3支持"),this._calliOSFunction("close",null,null)}},{key:"titleBarVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c.appVersionLessThan([7,10,1])&&console.log("隐藏title区域 7.10.1支持"),this._calliOSFunction("titleBarVisible",{isVisible:e})}},{key:"getUserSession",value:function(e){var t=this._registerCallback("getUserSession",e,_);this._calliOSFunction("getUserSession",null,t)}},{key:"loginWithSession",value:function(e){var t=this._registerCallback("loginWithSession",e,_);this._calliOSFunction("loginWithSession",null,t)}},{key:"verifyPhoneWithSession",value:function(e){var t=this._registerCallback("verifyPhoneWithSession",e,_);this._calliOSFunction("verifyPhoneWithSession",null,t)}},{key:"selectVideoAndUpload",value:function(e,t){var i=this._registerCallback("selectVideoAndUpload",t,W);console.log(i,i),this._calliOSFunction("selectVideoAndUpload",e,i)}},{key:"takeVideoAndUpload",value:function(e,t){var i=this._registerCallback("takeVideoAndUpload",t,W);this._calliOSFunction("takeVideoAndUpload",e,i)}},{key:"_calliOSFunction",value:function(e,t,i){var n=B.a.b612Scheme+"native/",o={};o.functionName=e,i&&(o.success=i),t&&(o.args=t),n+=a()(o),this._openCustomURLinIFrame(n)}},{key:"_openCustomURLinIFrame",value:function(e){var t=document.documentElement,i=document.createElement("IFRAME");i.setAttribute("src",e),t.appendChild(i),i.parentNode.removeChild(i)}}]),t}(y),j=function(){function e(){s()(this,e)}return l()(e,null,[{key:"getBridge",value:function(){return c.isIos()?new O:void 0!=window.B612KajiBridgeInterface&&c.isAndroid()?new x:new C}}]),e}().getBridge(),F=(i("Avvh"),i("0/sL"),function(){function e(){s()(this,e)}return l()(e,[{key:"toString",value:function(e){return e?a()(this,function(e,t){return t||void 0}):a()(this)}}]),e}()),T={imageCamera:"imageCamera",imageAlbum:"imageAlbum",videoCamera:"videoCamera"},R={front:"0",back:"1"},q=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.type,n=void 0===i?"":i,a=e.cameraPosition,o=void 0===a?"0":a,r=e.filterId,l=void 0===r?"":r,c=e.categoryId,u=void 0===c?"":c,h=e.stickerId,g=void 0===h?"":h,m=e.collageId,f=void 0===m?"":m;s()(this,t);var p=v()(this,(t.__proto__||d()(t)).call(this));if(!T[n])throw"[illegal type] "+n;return p.type=n,p.cameraPosition=o,p.filterId=l,p.categoryId=u,p.stickerId=g,p.collageId=f,p.autoDownload="true",p}return m()(t,e),l()(t,null,[{key:"types",get:function(){return T}},{key:"cameraPositions",get:function(){return R}}]),t}(F),J={image:"image",video:"video",web:"web"},M=function(e){function t(e){var i=e.url,n=void 0===i?"":i,a=e.type,o=void 0===a?"image":a,r=e.title,l=void 0===r?"":r,c=e.content,u=void 0===c?"":c,h=e.thumbnail,g=void 0===h?"":h;s()(this,t);var m=v()(this,(t.__proto__||d()(t)).call(this));if(!J[o])throw"[illegal type] "+o;return m.url=n,m.type=o,m.title=l,m.content=u,m.thumbnail=g,m}return m()(t,e),l()(t,null,[{key:"types",get:function(){return J}}]),t}(F),H=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.maxDuration,n=void 0===i?15:i,a=e.maxResolution,o=void 0===a?1080:a;s()(this,t);var r=v()(this,(t.__proto__||d()(t)).call(this));return r.maxDuration=n,r.maxResolution=o,r}return m()(t,e),t}(F);console.log(B.a.b612Scheme+"inappBrowser?url=https://zhaodifont.github.io/kajicam/dist/release/index.html%3Fuuid%3D%7Bad_did%7D");new VConsole;var E={isAnd:!1,isIos:!1,isInApp:!1};function z(e){var t={};return(e||window.location.search).substring(1).split("?").forEach(function(e,i){var n=e.split("=");t[n[0]]=n[1]}),t}function D(e,t){if(console.log(">>> eventCameraCallback - result， type",e,t),e&&e.base64Image&&e.success){var i=e.base64Image,n=e.landmarks;$(".landmarks").text(n),$("#distImg").attr("src",i)}}c.isIos()?E.isIos=!0:c.isAndroid()&&(E.isAnd=!0),document.querySelector(".baseState").innerText=a()(E),j.appInfo(function(e){if(document.querySelector(".AppInfo").innerText=a()(e),e.app){E.isInApp=!0,window.kajiAppVersion=e.app.split("."),console.log(window.kajiAppVersion),document.querySelector(".baseState").innerText=a()(E),$("#getUUid").attr("href",B.a.b612Scheme+"inappBrowser?url=https://zhaodifont.github.io/kajicam/dist/release/index.html%3Fuuid%3D%7Bad_did%7D"),$(".appControl").show(),$(".exit").click(function(){j.close()});var t=!0;$("#titleBarVisible").click(function(){t=!t,j.titleBarVisible(t)});var i=z();$(".getUUidVal")[0].innerText=i.uuid?i.uuid:""}}),z(),$("#eventCamera_imageAlbum").on("click",function(){if(E.isInApp){var e=new q({type:q.types.imageAlbum});j.eventCamera(e,D)}else $("#inputfile").trigger("click")}),$("#eventCamera_imageCamera").on("click",function(){if(E.isInApp){var e=new q({type:q.types.imageCamera,cameraPosition:q.cameraPositions.front,filterId:B.a.filterId,categoryId:B.a.categoryId,stickerId:B.a.stickerId});j.eventCamera(e,D)}else $("#inputfile").trigger("click")}),$("#eventCameraWithLandmarks").on("click",function(){if(E.isInApp){var e=new q({type:q.types.imageCamera,cameraPositions:q.cameraPositions.front,filterId:B.a.filterId,categoryId:B.a.categoryId,stickerId:B.a.stickerId});j.eventCameraWithLandmarks(e,D)}else $("#inputfile").trigger("click")}),$("#eventCameraWithLandmarks_imageAlbum").on("click",function(){if(E.isInApp){var e=new q({type:q.types.imageAlbum});j.eventCameraWithLandmarks(e,D)}else $("#inputfile").trigger("click")}),$("#selectVideoAndUpload").on("click",function(){var e=new H;j.selectVideoAndUpload(e,function(e){console.log(e),e.success&&($("#distVideo").attr({src:e.videoPath,controls:"true",autoplay:"true"}),$("#distVideo")[0].play())})}),$("#takeVideoAndUpload").on("click",function(){var e=new q({type:q.types.videoCamera,filterId:B.a.filterId,categoryId:B.a.categoryId,stickerId:B.a.stickerId});j.takeVideoAndUpload(e,function(e){console.log(e),e.success&&($("#distVideo").attr({src:e.videoPath,controls:"true",autoplay:"true"}),$("#distVideo")[0].play())})}),$("#saveBtn").on("click",function(){if(0==$("#distImg").attr("src").length)alert("plz select media");else{var e=new M({url:$("#distImg").attr("src"),type:M.types.image});j.save(e,function(){alert("save success")})}}),$("#shareVideo").on("click",function(){var e=new M({url:"https://b612-static.kajicam.com/stickerpr/1391/file_media_1_1545207714759.mp4",type:M.types.video}),t=!1;j.shareWithCallback(e,function(e){t||(t=!t,alert("video has been saved, plz choose to share from album"))},function(e){})}),$("#sharePage").on("click",function(){var e=new M({title:"set title: 一起来玩最爱的B612咔叽，随手一排就是小仙女～",content:"set content: 一起来玩最爱的B612咔叽，随手一排就是小仙女～",thumbnail:"https://dummyimage.com/850x850/b293a4/fff&text=someImg",url:"http://www.baidu.com",type:M.types.web});j.shareWithCallback(e,function(e){alert("callback")})}),$("#shareImage").on("click",function(){var e=new M({url:"https://b612-static.kajicam.com/stickerpr/1388/file_media_1_1545210560520.jpg",type:M.types.image});j.shareWithCallback(e,function(e){alert("callback")},function(e){})}),$("#getUserSession").on("click",function(){$(".userSession").text(""),j.getUserSession(function(e){for(var t in e)void 0==e[t]&&(e[t]="");console.log(e),$(".userSession").text(a()(e))})}),$("#loginWithSession").on("click",function(){$(".userSession").text(""),j.loginWithSession(function(e){for(var t in e)void 0==e[t]&&(e[t]="");console.log(e),$(".userSession").text(a()(e))})}),$("#verifyPhoneWithSession").on("click",function(){$(".userSession").text(""),j.verifyPhoneWithSession(function(e){for(var t in e)void 0==e[t]&&(e[t]="");console.log(e),$(".userSession").text(a()(e))})}),$("#inputfile").on("change",function(){$("#distImg").attr("src",URL.createObjectURL($(this)[0].files[0]))})},TcyI:function(e,t){e.exports={assetsPublicPath:"./",assetsRoot:"../dist/local/",b612Scheme:"b612cnb://",sitePrefix:"http://h5-beta.kajicam.com/events",uploadUrl:"http://qa-b612-fs.snowcam.cn/v1/event/vision/travel/upload-only",imgProcess:"http://qa-b612-fs.snowcam.cn/v1/event/vision/travel",imagePrefix:"https://qa-b612.snowcam.cn/owfs/",filterId:"235",categoryId:"20136",stickerId:"301197",activityName:"sept",downLink:"https://lnk0.com/easylink/EL50AJ9g"}}},["NHnr"]);
//# sourceMappingURL=app.b31342.js.map