webpackJsonp([1],{"2CaA":function(e,t){e.exports={assetsPublicPath:"./",assetsRoot:"../dist/release/",b612Scheme:"b612cn://",sitePrefix:"http://h5.kajicam.com/events/",uploadUrl:"https://b612-fs.snowcam.cn/v1/event/vision/xiaofu/upload-only",imgProcess:"https://b612-fs.snowcam.cn/v1/event/vision/xiaofu",imagePrefix:"https://b612kaji-org.oss-cn-beijing.aliyuncs.com/",filterId:"235",categoryId:"20005",stickerId:"301197"}},"2uFj":function(e,t,i){var n=i("6rvf"),a=(i("2CaA"),i("TcyI"),null);a=n,e.exports=a},"6rvf":function(e,t){e.exports={assetsPublicPath:"./",assetsRoot:"../dist/beta/",b612Scheme:"b612cnb://",sitePrefix:"http://h5-beta.kajicam.com/events",uploadUrl:"http://qa-b612-fs.snowcam.cn/v1/event/vision/xiaofu/upload-only",imgProcess:"http://qa-b612-fs.snowcam.cn/v1/event/vision/xiaofu",imagePrefix:"https://qa-b612.snowcam.cn/owfs/",filterId:"235",categoryId:"20136",stickerId:"301197",activityName:"sept",downLink:"https://lnk0.com/easylink/EL50AJ9g"}},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),o=i("woOf"),s=i.n(o),r=i("Zrlr"),l=i.n(r),c=i("wxAW"),u=i.n(c),d=function(){function e(){l()(this,e)}return u()(e,null,[{key:"isIos",value:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)}},{key:"isAndroid",value:function(){return!!navigator.userAgent.match(/Android/i)}},{key:"isIosOrAndroid",value:function(){return e.isIos()||e.isAndroid()}},{key:"isIosLowerThan11",value:function(){var t=!1;e.isIos()&&(t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]<=10);return t}},{key:"isIos8or9",value:function(){var e=navigator.userAgent;return e.indexOf("OS 8_")>=0||e.indexOf("OS 9_")>=-1}},{key:"appVersionLessThan",value:function(e){for(var t=e,i=window.kajiAppVersion,n=0;n<t.length;n++){var a=parseInt(i[n],10)||0,o=parseInt(t[n],10)||0;if(a<o)return!0;if(a>o)return!1}return!1}}]),e}(),v=i("Zx67"),h=i.n(v),g=i("zwoO"),f=i.n(g),m=i("Pf15"),p=i.n(m),k=i("yEsh"),y=i.n(k),b={bridgeNs1st:"B612",bridgeNs2nd:"Native",_initB612Context:function(){return window[this.bridgeNs1st]=window[this.bridgeNs1st]||{},window[this.bridgeNs1st][this.bridgeNs2nd]=window[this.bridgeNs1st][this.bridgeNs2nd]||{},window[this.bridgeNs1st][this.bridgeNs2nd]},getB612NativeContext:function(){var e=this._initB612Context();return e.namespace=this.bridgeNs1st+"."+this.bridgeNs2nd,e}},_=function(){function e(){return l()(this,e),null}return u()(e,[{key:"_initInstance",value:function(){this.className=this.constructor.name,this.fullName=b.getB612NativeContext().namespace+"."+this.className,this.callback={},this.callback.fullName=this.fullName+".callback",this._registerGlobal()}},{key:"_registerGlobal",value:function(){b.getB612NativeContext()[this.className]=b.getB612NativeContext()[this.className]||this}},{key:"_registerCallback",value:function(e,t,i){for(var n=arguments.length,a=Array(n>3?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];var s=this;return this.callback[e]=function(n){s._logResult(n,e),console.log("result:",n),console.log("callbackName:",e),console.log("resultType:",i);var o=i?i.from(n):n;t.apply(void 0,[o].concat(a))},this._makeNativeCallbackName(e)}},{key:"_makeNativeCallbackName",value:function(e){return this.callback.fullName+"."+e}},{key:"_logResult",value:function(e,t){var i=e;"string"==typeof e&&(i=e.substring(0,1e3)),console.log("[Native callback]["+t+"] : "+i)}},{key:"printThis",value:function(){console.log("--- print this below --- "),console.log(this),console.log("--- end of print this --- ")}}],[{key:"getInstance",value:function(){return null}}]),e}(),C=null,I=function(e){function t(){var e;l()(this,t);var i=f()(this,(t.__proto__||h()(t)).call(this));return C||(C=i,y()(t.prototype.__proto__||h()(t.prototype),"_initInstance",i).call(i,C)),e=C,f()(i,e)}return p()(t,e),u()(t,[{key:"appInfo",value:function(e){console.log("[NullBridge] appInfo")}},{key:"save",value:function(e,t){console.log("[NullBridge] save, param : "+e.toString())}},{key:"shareWithCallback",value:function(e,t,i){console.log("[NullBridge] shareWithCallback, param : "+e.toString())}},{key:"eventCamera",value:function(e,t){console.log("[NullBridge] eventCamera, param : "+e.toString())}},{key:"eventCameraWithLandmarks",value:function(e,t){console.log("[NullBridge] eventCamera, param : "+e.toString())}},{key:"getCameraImage",value:function(e){console.log("[NullBridge] getCameraImage")}},{key:"getCameraImageWithLandmarks",value:function(e){console.log("[NullBridge] getCameraImage")}},{key:"close",value:function(){console.log("[NullBridge] close")}},{key:"titleBarVisible",value:function(e){console.log("[NullBridge] titleBarVisible, param : "+e.toString())}},{key:"getUserSession",value:function(e){console.log("[NullBridge] getUserSession")}},{key:"loginWithSession",value:function(e){console.log("[NullBridge] loginWithSession")}},{key:"verifyPhoneWithSession",value:function(e){console.log("[NullBridge] verifyPhoneWithSession")}},{key:"selectVideoAndUpload",value:function(e,t){console.log("[NullBridge] selectVideoAndUpload, param : "+e.toString())}},{key:"takeVideoAndUpload",value:function(e){console.log("[NullBridge] selectVideoAndUpload")}}]),t}(_),S=function(){function e(t,i,n,a,o){l()(this,e),this.app=t,this.os=i,this.deviceModel=n,this.language=a,this.country=o}return u()(e,null,[{key:"from",value:function(t){var i=JSON.parse(t);return new e(i.app,i.os,i.deviceModel,i.language,i.country)}}]),e}(),w=function(){function e(t,i,n,a,o,s){l()(this,e),this.userId=t,this.name=i,this.userSeq=n,this.userM=a,this.email=o,this.success=s}return u()(e,null,[{key:"from",value:function(t){var i=JSON.parse(t);return new e(i.userId,i.name,i.userSeq,i.userM,i.email,i.success)}}]),e}(),A=function(){function e(t){l()(this,e),this.success=t}return u()(e,null,[{key:"from",value:function(t){return new e(JSON.parse(t).success)}}]),e}(),N=function(){function e(t,i){l()(this,e),this.base64Image=t,this.success=i}return u()(e,null,[{key:"from",value:function(t){return new e(t,!!t)}}]),e}(),P=function(){function e(t,i){l()(this,e),this.base64Image=t,this.success=i}return u()(e,null,[{key:"from",value:function(t){return t?new e(t.replace(/\n/gi,""),!0):new e(t,!1)}}]),e}(),V=function(){function e(t){var i=t.success,n=t.base64Image,o=t.url,s=t.landmarks;l()(this,e),this.success=i,this.base64Image=n,this.url=o,this.landmarks=a()(s)}return u()(e,null,[{key:"from",value:function(t){return new e(JSON.parse(t))}}]),e}(),W=i("pFYg"),x=i.n(W),B=function(){function e(t,i){l()(this,e),this.videoPath=t,this.success=i}return u()(e,null,[{key:"from",value:function(t){console.log("result",t),console.log("VideoResult1:",t.success,void 0===t?"undefined":x()(t),JSON.parse(a()(t))),console.log("VideoResult2:",a()(t)),console.log("videoPath",this.videoPath);var i="'"+t+"'";console.log("_res1",_res1,"undefined"==typeof _res1?"undefined":x()(_res1),_res1.success),console.log("_res2",JSON.parse(i));var n=JSON.parse(a()(t));return new e(n.videoPath,n.success)}}]),e}(),U=null,L=window.B612KajiBridgeInterface,O=function(e){function t(){var e;l()(this,t);var i=f()(this,(t.__proto__||h()(t)).call(this));return U||(U=i,y()(t.prototype.__proto__||h()(t.prototype),"_initInstance",i).call(i,U)),e=U,f()(i,e)}return p()(t,e),u()(t,[{key:"appInfo",value:function(e){var t=this._registerCallback("appInfo",e,S);L.appInfo(t)}},{key:"save",value:function(e,t){var i=this._registerCallback("save",t,A);L.save(i,e.toString())}},{key:"shareWithCallback",value:function(e,t,i){var n=this._registerCallback("sharePoppedCallback",t,A),a=this._registerCallback("shareMediaClickedCallback",i,A);L.shareWithCallback(n,a,e.toString())}},{key:"eventCamera",value:function(e,t){d.isAndroid();var i=this._registerCallback("eventCamera",t,N,e.type,e.cameraPosition);L.eventCamera(i,e.toString(!0))}},{key:"eventCameraWithLandmarks",value:function(e,t){d.appVersionLessThan([7,6,0])&&console.log("eventCameraWithLandmarks 7.6.0支持");var i=this._registerCallback("eventCameraWithLandmarks",t,V,e.type,e.cameraPosition);L.eventCameraWithLandmarks(i,e.toString(!0))}},{key:"getCameraImage",value:function(e){var t=this._registerCallback("getCameraImage",e,P);L.getCameraImage(t)}},{key:"getCameraImageWithLandmarks",value:function(e){var t=this._registerCallback("getCameraImageWithLandmarks",e,V);L.getCameraImageWithLandmarks(t)}},{key:"close",value:function(){d.appVersionLessThan([6,5,3])&&console.log("关闭当前h5所在的webview 6.5.3支持"),L.close()}},{key:"titleBarVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.appVersionLessThan([7,10,1])&&console.log("隐藏title区域 7.10.1支持"),L.titleBarVisible(a()({isVisible:e}))}},{key:"getUserSession",value:function(e){var t=this._registerCallback("getUserSession",e,w);L.getUserSession(t)}},{key:"loginWithSession",value:function(e){var t=this._registerCallback("loginWithSession",e,w);L.loginWithSession(t)}},{key:"verifyPhoneWithSession",value:function(e){var t=this._registerCallback("verifyPhoneWithSession",e,w);L.verifyPhoneWithSession(t)}},{key:"selectVideoAndUpload",value:function(e,t){var i=this._registerCallback("selectVideoAndUpload",t,B);L.selectVideoAndUpload(i,e.toString(!0))}},{key:"takeVideoAndUpload",value:function(e,t){var i=this._registerCallback("takeVideoAndUpload",t,B);L.takeVideoAndUpload(i,e.toString(!0))}}]),t}(_),F=i("2uFj"),j=i.n(F),T=null,R=function(e){function t(){var e;l()(this,t);var i=f()(this,(t.__proto__||h()(t)).call(this));return T||(T=i,y()(t.prototype.__proto__||h()(t.prototype),"_initInstance",i).call(i,T)),e=T,f()(i,e)}return p()(t,e),u()(t,[{key:"appInfo",value:function(e){var t=this._registerCallback("appInfo",e,S);this._calliOSFunction("appInfo",null,t)}},{key:"save",value:function(e,t){var i=this._registerCallback("save",t,A);this._calliOSFunction("save",e,i)}},{key:"shareWithCallback",value:function(e,t,i){var n=this._registerCallback("sharePoppedCallback",t,A),a=this._registerCallback("shareMediaClickedCallback",i,A),o=JSON.parse(e.toString());o.clickShareButton=a,this._calliOSFunction("share",o,n)}},{key:"eventCamera",value:function(e,t){var i=this._registerCallback("eventCamera",t,V,e.type,e.cameraPosition);this._calliOSFunction("eventCamera",e,i)}},{key:"eventCameraWithLandmarks",value:function(e,t){d.appVersionLessThan([7,6,0])&&console.log("eventCameraWithLandmarks 7.6.0支持");var i=this._registerCallback("eventCameraWithLandmarks",t,V,e.type,e.cameraPosition);this._calliOSFunction("eventCameraWithLandmarks",e,i)}},{key:"getCameraImage",value:function(e){var t=this._registerCallback("getCameraImage",e,V);this._calliOSFunction("getCameraImage",null,t)}},{key:"getCameraImageWithLandmarks",value:function(e){var t=this._registerCallback("getCameraImageWithLandmarks",e,V);this._calliOSFunction("getCameraImageWithLandmarks",null,t)}},{key:"close",value:function(){d.appVersionLessThan([6,5,3])&&console.log("关闭当前h5所在的webview 6.5.3支持"),this._calliOSFunction("close",null,null)}},{key:"titleBarVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d.appVersionLessThan([7,10,1])&&console.log("隐藏title区域 7.10.1支持"),this._calliOSFunction("titleBarVisible",{isVisible:e})}},{key:"getUserSession",value:function(e){var t=this._registerCallback("getUserSession",e,w);this._calliOSFunction("getUserSession",null,t)}},{key:"loginWithSession",value:function(e){var t=this._registerCallback("loginWithSession",e,w);this._calliOSFunction("loginWithSession",null,t)}},{key:"verifyPhoneWithSession",value:function(e){var t=this._registerCallback("verifyPhoneWithSession",e,w);this._calliOSFunction("verifyPhoneWithSession",null,t)}},{key:"selectVideoAndUpload",value:function(e,t){var i=this._registerCallback("selectVideoAndUpload",t,B);console.log(i,i),this._calliOSFunction("selectVideoAndUpload",e,i)}},{key:"takeVideoAndUpload",value:function(e,t){var i=this._registerCallback("takeVideoAndUpload",t,B);this._calliOSFunction("takeVideoAndUpload",e,i)}},{key:"_calliOSFunction",value:function(e,t,i){var n=j.a.b612Scheme+"native/",o={};o.functionName=e,i&&(o.success=i),t&&(o.args=t),n+=a()(o),this._openCustomURLinIFrame(n)}},{key:"_openCustomURLinIFrame",value:function(e){var t=document.documentElement,i=document.createElement("IFRAME");i.setAttribute("src",e),t.appendChild(i),i.parentNode.removeChild(i)}}]),t}(_),J=function(){function e(){l()(this,e)}return u()(e,null,[{key:"getBridge",value:function(){return d.isIos()?new R:void 0!=window.B612KajiBridgeInterface&&d.isAndroid()?new O:new I}}]),e}().getBridge(),E=(i("Avvh"),i("0/sL"),function(){function e(){l()(this,e)}return u()(e,[{key:"toString",value:function(e){return e?a()(this,function(e,t){return t||void 0}):a()(this)}}]),e}()),q={imageCamera:"imageCamera",imageAlbum:"imageAlbum",videoCamera:"videoCamera"},M={front:"0",back:"1"},D=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.type,n=void 0===i?"":i,a=e.cameraPosition,o=void 0===a?"0":a,s=e.filterId,r=void 0===s?void 0:s,c=e.categoryId,u=void 0===c?void 0:c,d=e.stickerId,v=void 0===d?void 0:d,g=e.takemode,m=void 0===g?void 0:g,p=e.collageId,k=void 0===p?void 0:p;l()(this,t);var y=f()(this,(t.__proto__||h()(t)).call(this));if(!q[n])throw"[illegal type] "+n;return y.type=n,y.cameraPosition=o,y.filterId=r,y.categoryId=u,y.stickerId=v,y.collageId=k,y.autoDownload="true",y.takemode=m,y}return p()(t,e),u()(t,null,[{key:"types",get:function(){return q}},{key:"cameraPositions",get:function(){return M}}]),t}(E),z={image:"image",video:"video",web:"web"},H=function(e){function t(e){var i=e.url,n=void 0===i?"":i,a=e.type,o=void 0===a?"image":a,s=e.title,r=void 0===s?"":s,c=e.content,u=void 0===c?"":c,d=e.thumbnail,v=void 0===d?"":d;l()(this,t);var g=f()(this,(t.__proto__||h()(t)).call(this));if(!z[o])throw"[illegal type] "+o;return g.url=n,g.type=o,g.title=r,g.content=u,g.thumbnail=v,g}return p()(t,e),u()(t,null,[{key:"types",get:function(){return z}}]),t}(E),G=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.maxDuration,n=void 0===i?15:i,a=e.maxResolution,o=void 0===a?1080:a;l()(this,t);var s=f()(this,(t.__proto__||h()(t)).call(this));return s.maxDuration=n,s.maxResolution=o,s}return p()(t,e),t}(E);i.d(t,"eventBaseName",function(){return Q});var K="";K=j.a.b612Scheme+"inappBrowser?url=https://zhaodifont.github.io/kajicam/dist/beta/index.html%3Fuuid%3D%7Bad_did%7D",new(i("Lw6n"));var Z=document.createElement("button");Z.innerText="11323",Z.setAttribute("class","debugBtn"),document.body.appendChild(Z),Z.onclick=function(){window.location.reload()};var Q="projectName",Y={inState:"outApp",isInApp:!1,version:"-",dpr:window.devicePixelRatio,duid:"-"};function X(e){var t={};return(e||window.location.search).substring(1).split("?").forEach(function(e,i){var n=e.split("=");t[n[0]]=n[1]}),t}function ee(e,t){if(console.log(">>> eventCameraCallback - result， type",e,t),e&&e.base64Image&&e.success){var i=e.base64Image,n=e.landmarks;$(".landmarks").text(n),$("#distImg").attr("src",i)}}!function(e){var t={};d.isIos()?t.isIos=!0:d.isAndroid()&&(t.isAnd=!0);var i=null;J.appInfo(function(n){if(clearTimeout(i),n.app)return window.kajiAppVersion=n.app.split("."),t.isInApp=!0,t.inState="inApp",t.version=n.app,t.EventFullPath=Q+"-"+t.inState,Y=s()({},Y,n,t),e()}),t.EventFullPath=Q+"-"+Y.inState,i=setTimeout(function(){Y=s()({},Y,t),e()},1200)}(function(){if(document.querySelector(".AppInfo").innerText=a()(Y),Y.isInApp){$("#getUUid").attr("href",K),$(".appControl").show(),$(".exit").click(function(){J.close()});var e=!0;$("#titleBarVisible").click(function(){e=!e,J.titleBarVisible(e)});var t=X();$(".getUUidVal")[0].innerText=t.uuid?t.uuid:"",$("#goStickera").click(function(){window.location.href=j.a.b612Scheme+"go?stickerId="+j.a.stickerId+"&autoDownload=true"}),$("#goStickerb").click(function(){alert(j.a.b612Scheme+"go?takemode=7&stickerId=326761"),window.location.href=j.a.b612Scheme+"go?takemode=7&stickerId=326761"}),$("#goStickerc").click(function(){var e=new D({type:D.types.imageCamera,cameraPosition:D.cameraPositions.front,stickerId:326761,takemode:7});alert(e),J.eventCamera(e,ee)})}}),X(),$("#eventCamera_imageAlbum").on("click",function(){if(Y.isInApp){var e=new D({type:D.types.imageAlbum});J.eventCamera(e,ee)}else $("#inputfile").trigger("click")}),$("#eventCamera_imageCamera").on("click",function(){if(Y.isInApp){var e=new D({type:D.types.imageCamera,cameraPosition:D.cameraPositions.front,filterId:j.a.filterId,categoryId:j.a.categoryId,stickerId:j.a.stickerId});J.eventCamera(e,ee)}else $("#inputfile").trigger("click")}),$("#eventCameraWithLandmarks").on("click",function(){if(Y.isInApp){var e=new D({type:D.types.imageCamera,cameraPositions:D.cameraPositions.front,filterId:j.a.filterId,categoryId:j.a.categoryId,stickerId:j.a.stickerId});J.eventCameraWithLandmarks(e,ee)}else $("#inputfile").trigger("click")}),$("#eventCameraWithLandmarks_imageAlbum").on("click",function(){if(Y.isInApp){var e=new D({type:D.types.imageAlbum});J.eventCameraWithLandmarks(e,ee)}else $("#inputfile").trigger("click")}),$("#selectVideoAndUpload").on("click",function(){var e=new G;console.log("selectVideoAndUpload params",e),J.selectVideoAndUpload(e,function(e){console.log("selectVideoAndUpload res:",e),e.success&&($("#distVideo").attr({src:e.videoPath,controls:"true",autoplay:"true"}),$("#distVideo")[0].play())})}),$("#takeVideoAndUpload").on("click",function(){var e=new D({type:D.types.videoCamera,filterId:j.a.filterId,categoryId:j.a.categoryId,stickerId:j.a.stickerId});J.takeVideoAndUpload(e,function(e){console.log(e),e.success&&($("#distVideo").attr({src:e.videoPath,controls:"true",autoplay:"true"}),$("#distVideo")[0].play())})}),$("#saveBtn").on("click",function(){if(0==$("#distImg").attr("src").length)alert("plz select media");else{var e=new H({url:$("#distImg").attr("src"),type:H.types.image});J.save(e,function(){alert("save success")})}}),$("#shareVideo").on("click",function(){var e=new H({url:"https://b612-static.kajicam.com/stickerpr/1391/file_media_1_1545207714759.mp4",type:H.types.video}),t=!1;J.shareWithCallback(e,function(e){t||(t=!t,alert("video has been saved, plz choose to share from album"))},function(e){})}),$("#sharePage").on("click",function(){var e=new H({title:"set title: 一起来玩最爱的B612咔叽，随手一排就是小仙女～",content:"set content: 一起来玩最爱的B612咔叽，随手一排就是小仙女～",thumbnail:"https://dummyimage.com/850x850/b293a4/fff&text=someImg",url:"http://www.baidu.com",type:H.types.web});J.shareWithCallback(e,function(e){alert("callback")})}),$("#shareImage").on("click",function(){var e=new H({url:"https://b612-static.kajicam.com/stickerpr/1388/file_media_1_1545210560520.jpg",type:H.types.image});J.shareWithCallback(e,function(e){alert("callback")},function(e){})}),$("#getUserSession").on("click",function(){$(".userSession").text(""),J.getUserSession(function(e){for(var t in e)void 0==e[t]&&(e[t]="");console.log(e),$(".userSession").text(a()(e))})}),$("#loginWithSession").on("click",function(){$(".userSession").text(""),J.loginWithSession(function(e){for(var t in e)void 0==e[t]&&(e[t]="");console.log(e),$(".userSession").text(a()(e))})}),$("#verifyPhoneWithSession").on("click",function(){$(".userSession").text(""),J.verifyPhoneWithSession(function(e){for(var t in e)void 0==e[t]&&(e[t]="");console.log(e),$(".userSession").text(a()(e))})}),$("#inputfile").on("change",function(){$("#distImg").attr("src",URL.createObjectURL($(this)[0].files[0]))})},TcyI:function(e,t){e.exports={assetsPublicPath:"./",assetsRoot:"../dist/local/",b612Scheme:"b612cnb://",sitePrefix:"http://h5-beta.kajicam.com/events",uploadUrl:"http://qa-b612-fs.snowcam.cn/v1/event/vision/travel/upload-only",imgProcess:"http://qa-b612-fs.snowcam.cn/v1/event/vision/travel",imagePrefix:"https://qa-b612.snowcam.cn/owfs/",filterId:"235",categoryId:"20136",stickerId:"301197",activityName:"sept",downLink:"https://lnk0.com/easylink/EL50AJ9g"}}},["NHnr"]);
//# sourceMappingURL=app.a76782.js.map